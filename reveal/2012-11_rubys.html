<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='en'>
  <head>
    <meta charset='utf-8' />
    <title>Ruby's</title>
    <meta content='What, Which and Why?' name='description' />
    <meta content='Miguel Palhas' name='author' />

    <meta content='yes' name='apple-mobile-web-app-capable' />
    <meta content='black-translucent' name='apple-mobile-web-app-status-bar-style' />

    <link href='css/reveal.css' rel='stylesheet' />
    <link href='css/theme/default.css' id='theme' rel='stylesheet' />
    <link href='css/2012-11_rubys.css' rel='stylesheet' />
    <!-- For syntax highlighting -->
    <link href='lib/css/zenburn.css' rel='stylesheet' />
    <!-- If the query includes 'print-pdf', use the PDF print sheet -->

    <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css' />
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>
    <!--[if lt IE 9]>
      <script src='lib/js/html5shiv.js'></script>
    <![endif]-->
  </head>
  <body>
    <div class='reveal'>
      <div class='state-background'></div>
      <div class='slides'>

        <section>
          <h1>Ruby's</h1>
          <h3>What, Which and Why?</h3>
          <footer>
            Miguel Palhas
            <br />
            mpalhas@gmail.com
          </footer>
        </section>

        <section>
          <h1>Table of Contents</h1>

            <ol class='wide'>
              <li>What's this about?</li>
              <li>How many are there?</li>
              <li>How they evolved...</li>
              <li>..And how they will evolve</li>
            </ol>
        </section>


        <section>
          <h1>What's this about?</h1>

          <p>Ruby is slow! (even for a scripting language)</p>

          <table class='table bench-table' style='width: 50%;'>
            <thead>
              <tr>
                <th>Language</th>
                <th>Exec Time</th>
              </tr>
            </thead>

            <tbody>
              <tr><td>Intel Fortran</td>              <td>1.15</td></tr>
              <tr><td>C++ g++</td>                    <td>1.27</td></tr>
              <tr><td>Java 7</td>                     <td>1.76</td></tr>
              <tr><td>Haskell GHC</td>                <td>2.00</td></tr>
              <tr><td>JavaScript V8</td>              <td>3.40</td></tr>
              <tr><td>Lua</td>                        <td>26.52</td></tr>
              <tr class='highlight'><td>JRuby</td>    <td>34.38</td></tr>
              <tr><td>PHP</td>                        <td>40.54</td></tr>
              <tr class='highlight'><td>Ruby 1.9</td> <td>46.43</td></tr>
              <tr><td>Python 3</td>                   <td>51.70</td></tr>
              <tr class='fragment'><td><img src='img/2012_11/trollface.png' class='no-shadow' style='height: 50px' />Perl</td>                       <td>60.89</td></tr>
            </tbody>
          </table>
          <hr />
        </section>


        <section>
          <h1>How many are there?</h1>
          <p>Quick answer: <span class='highlight'>A LOT!</span></p>
          <div class='two-cols'>
            <div>
              <ul class='wide no-bullet' style='padding-left: 140px'>
                <li>Ruby MRI</li>
                <li>YARV</li>
                <li>MacRuby</li>
                <li>MagLev</li>
                <li class='small'>Cardinal</li>
                <li class='small'>XRuby</li>
                <li class='small'>JSRuby</li>
              </ul>
            </div>
            <div>
              <ul class='wide no-bullet' style='padding-right: 140px'>
                <li>Rubinius</li>
                <li>JRuby</li>
                <li>MRuby</li>
                <li class='small'>Ruby EE</li>
                <li class='small'>IronRuby</li>
                <li class='small'>HotRuby</li>
                <li class='small'>RubyJS</li>
              </ul>
            </div>
        </section>


        <section>
          <h1>Ruby MRI</h1>
          <div class='two-cols'>
            <div style='width: 60%;'>
              <ul class='wide no-bullet'>
                <li>The original one</li>
                <li>Made by that guy <span style='font-size:1.4em'>&rarr;</span></li>
                <li>A performance nighmare</li>
              </ul>
            </div>
            <div style='width: 40%;'>
              <img src='img/2012_11/yukihiro_matsumoto.jpg' style='margin-top:0' />
              <small>Yukihiro Matsumoto, <br />author of Ruby (and MRI)</small>
            </div>
          </div>
        </section>


        <section>
          <h2>YARV</h2>
          <br />
          <ul class='wide no-bullet' style='font-size: 0.9em'>
            <li><strong>Goal</strong>: Fix MRI's main problem (speed)</li>
            <li><strong>Dec 2007</strong>: Replaced MRI as the official Ruby interpreter</li>
          </ul>
          <div class='fragment'>
            <hr />
            <br />
            <h2>JRuby</h2>
            <br />
            <ul class='wide no-bullet' style='font-size: 0.9em'>
              <li>Ruby language on the Java Virtual Machine</li>
              <li>Sometimes faster than YARV</li>
            </ul>

          </div>
        </section>


        <section>
          <h1>Back in 2007</h1>

          <div class="fragment">
            <hr />
            <h2>February</h2>
            <table class='table speedup-table'>
              <tr>
                <th></th>
                <th>Ruby 1.8.5</th>
                <th>Ruby 1.8.5 (Win)</th>
                <th>YARV</th>
                <th>JRuby</th>
                <th>Ruby.NET</th>
                <th>Rubinius</th>
                <th>Cardinal</th>
              </tr>

              <tr>
                <td class='highlight'>Speedup:</td>
                <td>1.00</td>
                <td class='down'>-1.45</td>
                <td class='up'>3.47</td>
                <td class='down'>-8.39</td>
                <td class='down'>-7.32</td>
                <td class='down'>-43.54</td>
                <td class='down'>-140.09</td>
              </tr>
            </table>
          </div>

          <div class="fragment">
            <hr />
            <h2>December</h2>
            <table class='table speedup-table'>
              <tr>
                <th></th>
                <th>Ruby 1.8.6</th>
                <th>Ruby 1.9 (YARV)</th>
                <th>JRuby</th>
                <th>XRuby</th>
                <th>Rubinius</th>
              </tr>

              <tr>
                <td class='highlight'>Speedup:</td>
                <td>1.00</td>
                <td class='up'>3.32</td>
                <td class='up'>1.32</td>
                <td class='up'>1.43</td>
                <td class='up'>0.73</td>
              </tr>
            </table>
          </div>
        </section>


        <section>
          <h1>Why Rubinius is different</h1>

          <table class='table loc-table fragment'>
            <thead>
              <tr><th>Interpreter</th>     <th>LOC (non Ruby)</th> <th>LOC (Ruby)</th></tr>
            </thead>
            <tbody>
              <tr><td>MRI (Ruby 1.8)</td>  <td>85 000, C</td>      <td>0</td>       </tr>
              <tr><td>YARV (Ruby 1.9)</td> <td>129 000, C</td>     <td>0</td>       </tr>
              <tr><td>JRuby</td>           <td>115 000, Java</td>  <td>~ 1 000</td> </tr>
              <tr><td>IronRuby</td>        <td>48 000, C#</td>     <td>0</td>       </tr>
              <tr><td>Rubinius</td>        <td>25 000, C</td>      <td>14 000</td>  </tr>
            </tbody>
          </table>
          <table class='table lol-table'>
            <tbody>
              <tr>
                <td class='fragment'><img src='img/2012_11/mri_interpreter.png' />      <br /> MRI/YARV </td>
                <td class='fragment'><img src='img/2012_11/rubinius_interpreter.png' /> <br /> Rubinius </td>
                <td class='fragment'><img src='img/2012_11/lol_interpreter.png' />      <br /> LOLCODE  </td>
              </tr>
            </tbody>
          </table>
        </section>



        <section>
          <h1>The Problem with GIL</h1>

          <p>Most Ruby's use a Global Interperter Lock</p>
          <br />
          <img src='img/2012_11/gil.jpg' style='width: 70%' />
          <br />
          <p>This only allows for distributed parallelism</p>
        </section>


        <section>
          <h1>The Problem with GIL</h1>

          <h3>Pros</h3>
          <ol class='wide' style='font-size: 0.8em' >
            <li>Faster single-threaded code</li>
            <li>Easy implementation (most C libs are not thread-safe)</li>
          </ol>

          <h3>Cons</h3>
          <ol class='wide' style='font-size: 0.8em' >
            <li>Multi Threading does not scale (note: Ruby 1.9 Fibers)</li>
            <li>Distributed Memory is more consuming</li>
          </ol>
        </section>



        <section>
          <h1>References</h1>
          <ol class='wide'>
            <li><a href='http://shootout.alioth.debian.org/u32/which-programs-are-fastest.php?ifc=on&gpp=on&java=on&ghc=on&csharp=on&sbcl=on&v8=on&hipe=on&vw=on&lua=on&jruby=on&php=on&yarv=on&python3=on&perl=on&calc=chart'>The Computer Language Benchmarks Game</a></li>

            <li><a href='http://programmingzen.com/2007/12/03/the-great-ruby-shootout/'>The Great Ruby Shootout</a></li>

            <li><a href='http://www.programblings.com/2008/04/01/rubinius-for-the-layman-part-1-rubies-all-the-way-down/'>Rubinius for the Layman</a></li>

          </ol>
        </section>


        <section>
          <h1 style="padding-top: 20%">Questions?</h1>
        </section>


      </div>
    </div>
    <script src='lib/js/head.min.js'></script>
    <script src='js/reveal.min.js'></script>
    <script>
      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        width: 800,
        height: 600,
        controls: true,
        progress: true,
        history: true,
        center: true,
        
        theme: Reveal.getQueryHash().theme || 'beige', // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/linear(2d)
      
        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });
    </script>
  </body>
</html>
